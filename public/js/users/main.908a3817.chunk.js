(this["webpackJsonpuser-react-web-client"]=this["webpackJsonpuser-react-web-client"]||[]).push([[0],{10:function(e,a,t){e.exports=t(24)},24:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(9),s=t.n(l),c=t(4),m=t(1),i=function(e,a){switch(a.type){case"FetchDataSuccess":return Object(m.a)(Object(m.a)({},e),{},{users:a.payload.users});case"FetchDataFailure":return Object(m.a)(Object(m.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not load remote data: ".concat(a.payload.error)}});case"HandleViewUser":return Object(m.a)(Object(m.a)({},e),{},{onViewUser:!0,onAddUser:!1,onEditUser:!1,user:a.payload.user});case"HandleCloseViewUser":return Object(m.a)(Object(m.a)({},e),{},{onViewUser:!1,user:null});case"HandleOnAddUser":return Object(m.a)(Object(m.a)({},e),{},{onAddUser:!0,onEditUser:!1,alert:Object(m.a)(Object(m.a)({},e.alert),{},{show:!1})});case"HandleCancelCreate":return Object(m.a)(Object(m.a)({},e),{},{onAddUser:!1});case"BeforeCreateUser":return Object(m.a)(Object(m.a)({},e),{},{alert:{show:!0,type:"info",message:"Creating user. Please wait!"}});case"CreateUserSuccess":var t=e.users;return t.push(a.payload.user),Object(m.a)(Object(m.a)({},e),{},{users:t,onAddUser:!1,alert:{show:!0,type:"success",message:"User successfully created!"}});case"CreateUserFailure":return Object(m.a)(Object(m.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not create user: ".concat(a.payload.error)}});case"BeforeDeleteUser":return Object(m.a)(Object(m.a)({},e),{},{alert:{show:!0,type:"info",message:"Deleting user. Please wait!"}});case"DeleteUserSuccess":var n=e.users,r=n.findIndex((function(e){return e.id===a.payload.id}));return n.splice(r,1),Object(m.a)(Object(m.a)({},e),{},{onViewUser:!1,users:n,alert:{show:!0,type:"success",message:"User successfully deleted!"}});case"DeleteUserFailure":return Object(m.a)(Object(m.a)({},e),{},{onViewTenant:!1,alert:{show:!0,type:"danger",message:"Could not delete user: ".concat(a.payload.error)}});case"BeforeUpdateUser":return Object(m.a)(Object(m.a)({},e),{},{alert:{show:!0,type:"info",message:"Updating user. Please wait!"}});case"HandleCancelUpdate":return Object(m.a)(Object(m.a)({},e),{},{onEditUser:!1});case"HandleEditUser":var l=e.users,s=l.findIndex((function(e){return e.id===a.payload.id})),c=l[s];return Object(m.a)(Object(m.a)({},e),{},{onEditUser:!0,user:c,onAddUser:!1,alert:Object(m.a)(Object(m.a)({},e.alert),{},{show:!1})});case"UpdateUserSuccess":var i=e.users,o=i.findIndex((function(e){return e.id===a.payload.user.id}));return i[o]=a.payload.user,Object(m.a)(Object(m.a)({},e),{},{onViewUser:!1,users:i,tenant:a.payload.user,onEditUser:!1,alert:{show:!0,type:"success",message:"User successfully updated!"}});case"UpdateUserFailure":return Object(m.a)(Object(m.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not update user: ".concat(a.payload.error)}});case"HandleCloseAlert":return Object(m.a)(Object(m.a)({},e),{},{alert:{show:!1,message:"",type:""}});default:return e}},o=t(2),d=t.n(o),u=t(3),p=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeCreateUser"}),e.prev=1,e.next=4,fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:r=e.sent,t({type:"CreateUserSuccess",payload:{user:r}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:"CreateUserFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a,t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeDeleteUser"}),e.prev=1,e.next=4,fetch("/users/".concat(a),{method:"DELETE"});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:t({type:"DeleteUserSuccess",payload:{id:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:"DeleteUserFailure",payload:{error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeUpdateUser"}),e.prev=1,e.next=4,fetch("/users/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:t({type:"UpdateUserSuccess",payload:{user:a}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:"UpdateUserFailure",payload:{error:e.t0}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(a,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(d.a.mark((function e(a){var t,n,r,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>1&&void 0!==l[1]?l[1]:{},e.prev=1,e.next=4,fetch("/users?findOptions=".concat(encodeURI(JSON.stringify(t))));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:r=e.sent,a({type:"FetchDataSuccess",payload:{usersCount:r.count,users:r.users}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),a({type:"FetchDataFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a){return e.apply(this,arguments)}}(),h=t(5),b=function(e){var a=e.message,t=e.type,n=e.onClickHandler;return r.a.createElement(h.Notification,{color:t,onClick:n},a,r.a.createElement(h.Button,{remove:!0}))},f=function(e){var a=e.user,t=Object(n.useContext)(j);return r.a.createElement("tr",null,r.a.createElement("td",null,a.firstName),r.a.createElement("td",null,a.middleName),r.a.createElement("td",null,a.lastName),r.a.createElement("td",null,a.commonName),r.a.createElement("td",null,a.gender),r.a.createElement("td",null,a.primaryEmailAddress),r.a.createElement("td",null,a.isActive),r.a.createElement("td",null,r.a.createElement("div",{className:"buttons are-small"},r.a.createElement("button",{className:"button is-link",onClick:function(){t.dispatch({type:"HandleViewUser",payload:{user:a}})}},"View Detail"),r.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),r.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete"))))},y=function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Common Name"),r.a.createElement("th",null,"First Name"),r.a.createElement("th",null,"Middle Name"),r.a.createElement("th",null,"Last Name"),r.a.createElement("th",null,"Gender"),r.a.createElement("th",null,"Email address"),r.a.createElement("th",null,"Active")))},w=function(e){var a;return a=e.users.map((function(e){return r.a.createElement(f,{user:e})})),r.a.createElement("table",{className:"table is-striped is-narrow is-hoverable"},r.a.createElement("caption",null,r.a.createElement("h3",null,"Available users")),r.a.createElement(y,null),r.a.createElement("tbody",null,a))},U=function(e){var a={firstName:"",middletName:"",lastName:"",commonName:"",gender:"",primaryEmailAddress:"",dateOfBirth:new Date,isActive:!1,profile:{homeAddress:"",Nationality:"",stateOfOrigin:"",bulmaProperties:{primaryColor:"",primaryBackground:""}}},t=Object(n.useState)(Object(m.a)({},a)),l=Object(c.a)(t,2),s=l[0],i=l[1],o=function(e){var a=s,t=e.target;a[t.name]=t.value,i(Object(m.a)({},a))};return r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("div",{className:"box"},r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleCreateUser(s,e.dispatch)}},r.a.createElement("legend",null,"Add User:"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"First name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Name input",name:"firstName",value:s.firstName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Middle name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Middle name input",name:"middleName",value:s.middleName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Last name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Last name input",name:"lastName",value:s.lastName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Common name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Common name input",name:"commonName",value:s.commonName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Gender"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Gender input",name:"gender",value:s.gender,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email address"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email Address",name:"primaryEmailAddress",value:s.primaryEmailAddress,onChange:o,required:!0})),r.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link"},"Submit")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})}},"Cancel")))))))},O=function(e){var a={id:e.user.id,firstName:e.user.firstName,middleName:e.user.middleName,lastName:e.user.lastName,commonName:e.user.commonName,gender:e.user.gender,primaryEmailAddress:e.user.primaryEmailAddress,dateOfBirth:e.user.dateOfBirth,isActive:e.user.isActive},t=Object(n.useState)(Object(m.a)({},a)),l=Object(c.a)(t,2),s=l[0],i=l[1],o=function(e){var a=s,t=e.target;a[t.name]=t.value,i(Object(m.a)({},a))};return r.a.createElement("div",{className:"columns is-mobile"},r.a.createElement("div",{className:"column is-two-thirds"},r.a.createElement("div",{className:"box"},r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleUpdateUser(s,e.dispatch)}},r.a.createElement("legend",null,"Add User:"),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"First name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Name input",name:"firstName",value:s.firstName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Middle name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Middle name input",name:"middleName",value:s.middleName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Last name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Last name input",name:"lastName",value:s.lastName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Common name"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Common name input",name:"commonName",value:s.commonName,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Gender"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"text",placeholder:"Gender input",name:"gender",value:s.gender,onChange:o,required:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("label",{className:"label"},"Email address"),r.a.createElement("div",{className:"control"},r.a.createElement("input",{className:"input",type:"email",placeholder:"Email Address",name:"primaryEmailAddress",value:s.primaryEmailAddress,onChange:o,required:!0})),r.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),r.a.createElement("div",{className:"field is-grouped"},r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link"},"Submit")),r.a.createElement("div",{className:"control"},r.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelUpdate"})}},"Cancel")))))))},g=function(e){var a=e.user,t=Object(n.useContext)(j);return r.a.createElement("div",{className:"modal is-active"},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Details of ".concat(a.name)),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(){t.dispatch({type:"HandleCloseViewUser"})}})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"},"First name:"),r.a.createElement("div",{className:"column"},a.firstName)),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"},"Middle name:"),r.a.createElement("div",{className:"column"},a.middletName)),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"},"Last name:"),r.a.createElement("div",{className:"column"},a.lastName)),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"},"Common name:"),r.a.createElement("div",{className:"column"},a.commonName)),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"},"Gender:"),r.a.createElement("div",{className:"column"},a.gender)),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"},"Email address:"),r.a.createElement("div",{className:"column"},a.primaryEmailAddress)),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-two-fifths"},"Active:"),r.a.createElement("div",{className:"column"},a.isActive?"Yes":"No"))),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("div",{className:"buttons are-small"},r.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),r.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete")))))},j=r.a.createContext(null),C=function(e){e.jwtToken;var a=Object(n.useReducer)(i,{users:[],user:null,onAddUser:!1,onViewUser:!1,onEditUser:!1,alert:{show:!1,message:"",type:""}}),t=Object(c.a)(a,2),l=t[0],s=t[1],m={};Object(n.useEffect)((function(){v(s,m)}),[]);var o=r.a.createElement(b,{type:l.alert.type,message:l.alert.message,onClickHandler:function(){s({type:"HandleCloseAlert"})}});return l.onEditUser&&null!==l.user?r.a.createElement("div",{className:"container "},r.a.createElement("div",{className:"content is-medium"},r.a.createElement("p",null,r.a.createElement(O,{user:l.user,handleUpdateUser:N,dispatch:s})),r.a.createElement("p",null,l.alert.show&&o),r.a.createElement("p",null,r.a.createElement(j.Provider,{value:{dispatch:s,handleDeleteUser:E}},r.a.createElement(w,{users:l.users}))))):l.onAddUser?r.a.createElement("div",{className:"container "},r.a.createElement("div",{className:"content is-medium"},r.a.createElement("p",null,r.a.createElement(U,{handleCreateUser:p,dispatch:s})),r.a.createElement("p",null,l.alert.show&&o),r.a.createElement("p",null,r.a.createElement(j.Provider,{value:{dispatch:s,handleDeleteUser:E}},r.a.createElement(w,{users:l.users}))))):l.onViewUser&&null!=l.user?r.a.createElement("div",{className:"container "},r.a.createElement("div",{className:"content is-medium"},r.a.createElement("p",null,r.a.createElement(j.Provider,{value:{dispatch:s,handleDeleteUser:E}},r.a.createElement(g,{user:l.user}))))):r.a.createElement("div",{className:"container "},r.a.createElement("div",{className:"content is-medium"},r.a.createElement("p",null,r.a.createElement("button",{className:"button is-outline",onClick:function(){s({type:"HandleOnAddUser"})}},"+ Add User")),r.a.createElement("p",null,l.alert.show&&o),r.a.createElement("p",null,r.a.createElement(j.Provider,{value:{dispatch:s,handleDeleteUser:E}},r.a.createElement(w,{users:l.users})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var x=document.getElementById("initial-props").getAttribute("data-json"),k=JSON.parse(x||"");s.a.hydrate(r.a.createElement(C,k),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.908a3817.chunk.js.map